// Value for column id will be auto generated
INSERT INTO world_food (country,rice_production,wheat_production)  
VALUES ('Italy',1.46,7.3);

// Insert query in PostgreSQL. It will be in the format of pg query(SQL, Values). We pass parameter inside query.
// $1, $2, $3 will be replaced with values during insertion
db.query("INSERT INTO world_food
(country, rice_production, wheat_production)
VALUES ($1, $2, $3)",
["Italy", 1.46, 7.3]);

// Challenge - To highlight the country with color by typing country name
// In PGAdmin
create table countries (
	id SERIAL PRIMARY KEY,
	country_code CHAR(2),
	country_name VARCHAR(100)
);

//In index.js
..
app.get("/", async (req, res) => {
  //Write your code here.
  const result = await db.query('Select country_code from visited_countries');
  console.log(result.rows);
  let countries = [];
  result.rows.forEach(country => {
    countries.push(country.country_code);
  });
  res.render("index.ejs", { countries: countries, total: countries.length});
});

app.post("/add", async (req, res) => {
  const input = req.body["country"];  // To get hold of user entered country name

  const result = await db.query('Select country_code from countries where country_name = $1',
  [input]
  );

  if(result.rows.length !== 0){
    const countryCode = result.rows[0].country_code;

    await db.query('INSERT INTO visited_countries (country_code) VALUES ($1)',
    [countryCode]
    );
    res.redirect("/");
  }
});
..

For more info -
D:\Web development\Postgresql\8.3 Travel Tracker

